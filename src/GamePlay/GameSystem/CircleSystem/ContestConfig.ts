/**
 * 競り合い関連の設定を一元管理するファイル
 * キャラクター同士のサークル重なりと押し返しに関する定数を提供
 */

/**
 * 競り合い設定
 */
export const CONTEST_CONFIG = {
  // ==========================================================================
  // 重なり許容設定
  // ==========================================================================

  /**
   * 許容する重なり量（メートル）
   * この範囲内の重なりは押し返し処理をしない
   * 例: 0.1 = 10cm以内の重なりは許容
   */
  OVERLAP_TOLERANCE: 0.1,

  /**
   * 重なり解消判定のマージン（メートル）
   * 押し返し完了の判定に使用
   */
  OVERLAP_MARGIN: 0.01,

  // ==========================================================================
  // ステータス差による押し返し距離設定
  // ==========================================================================

  /**
   * 基本押し返し距離（メートル/フレーム）
   * ステータスが同等の場合の1フレームあたりの押し返し距離
   */
  PUSH_DISTANCE_BASE: 0.002,

  /**
   * ステータス差1あたりの追加押し返し距離（メートル/フレーム）
   * 例: 0.0005 = ステータス差20で0.01m/フレーム追加
   */
  STAT_DIFF_DISTANCE_MULTIPLIER: 0.0005,

  /**
   * 最大押し返し距離（メートル/フレーム）
   * どれだけステータス差があってもこれ以上にはならない
   */
  PUSH_DISTANCE_MAX: 0.02,

  // ==========================================================================
  // ノックバック設定
  // ==========================================================================

  /**
   * 押し返し完了後のノックバック距離（メートル）
   * 押し返しが完了したら両者にこの距離だけ隙間を作る
   */
  KNOCKBACK_DISTANCE: 0.03,

  /**
   * ノックバックの適用速度（メートル/フレーム）
   * 瞬間的ではなく少しずつ離れる
   */
  KNOCKBACK_SPEED: 0.01,

  // ==========================================================================
  // ステータス差による押し返し比率設定
  // ==========================================================================

  /**
   * 同等ステータス時のお互いの押し出し比率
   * 0.5 = 両者が同じ量だけ押される
   */
  EQUAL_STAT_PUSH_RATIO: 0.5,

  /**
   * 最大押し出し比率
   * 強い側が弱い側を押す最大比率
   * 例: 0.95 = 弱い側は最大95%押される（ほぼ一方的に後退）
   */
  MAX_PUSH_RATIO: 0.95,

  /**
   * 最小押し出し比率
   * 強い側でも最低限押される比率
   * 例: 0.05 = 強い側でも最低5%は押される
   */
  MIN_PUSH_RATIO: 0.05,

  /**
   * ステータス差による比率変化の感度
   * 高いほど少ないステータス差で比率が大きく変わる
   * 例: 2.0 = ステータス差50で最大/最小比率に到達
   */
  STAT_RATIO_SENSITIVITY: 2.0,

  // ==========================================================================
  // 使用するステータス設定
  // ==========================================================================

  /**
   * オフェンス側（ボール保持者）が使用するステータス
   * 'offense' | 'power' | 'speed'
   */
  OFFENSE_STAT: 'offense' as const,

  /**
   * ディフェンス側（ボール非保持者）が使用するステータス
   * 'defense' | 'power' | 'speed'
   */
  DEFENSE_STAT: 'defense' as const,

} as const;

/**
 * ステータスタイプ
 */
export type ContestStatType = 'offense' | 'defense' | 'power' | 'speed';
