import { MotionDefinition } from "./MotionDefinitionTypes";

/**
 * 歩行モーション（差分方式）
 *
 * 1秒サイクル（30フレーム @ 30fps）
 *
 * 値は idle に対する追加回転（度）:
 *   0° = idle のまま（追加なし）
 *   isDelta: true により、idle ポーズの上にこの回転が加算される
 *
 * 主要タイミング:
 *   0s(f0) → 0.267s(f8) → 0.5s(f15) → 0.767s(f23) → 1.0s(f30)
 */

export const WALK_MOTION: MotionDefinition = {
  name: "walk",
  duration: 1.0,
  isDelta: true,
  joints: {
    // ── Hips: 左右回転（Y）と左右傾き（Z） ──
    hipsY: { 0: 0, 0.267: 3.44, 0.5: 0, 0.767: -3.44, 1.0: 0 },
    hipsZ: { 0: 0, 0.267: -2.29, 0.5: 0, 0.767: 2.29, 1.0: 0 },

    // ── Spine: 前傾（X）+ 左右ひねり（Y） ──
    spineX: { 0: 3.44, 0.267: 2.29, 0.5: 3.44, 0.767: 2.29, 1.0: 3.44 },
    spineY: { 0: 6.88, 0.267: 0, 0.5: -6.88, 0.767: 0, 1.0: 6.88 },

    // ── 左上腿: 前後スイング（X） ──
    leftHipX: { 0: 25.78, 0.267: 2.86, 0.5: -22.92, 0.767: 2.86, 1.0: 25.78 },

    // ── 右上腿: 左と逆位相 ──
    rightHipX: { 0: -22.92, 0.267: 2.86, 0.5: 25.78, 0.767: 2.86, 1.0: -22.92 },

    // ── 左下腿: 膝の屈曲（X） ──
    leftKneeX: {
      0: 4.58, 0.133: 11.46, 0.267: 2.86, 0.4: 8.59,
      0.5: 20.05, 0.633: 57.30, 0.833: 11.46, 1.0: 4.58,
    },

    // ── 右下腿: 左と逆位相 ──
    rightKneeX: {
      0: 20.05, 0.133: 57.30, 0.333: 11.46, 0.5: 4.58,
      0.633: 11.46, 0.767: 2.86, 0.9: 8.59, 1.0: 20.05,
    },

    // ── 左足首: 背屈/底屈（X） ──
    leftFootX: {
      0: -11.46, 0.133: -2.86, 0.267: 0, 0.4: 14.32,
      0.5: 8.59, 0.767: -5.73, 1.0: -11.46,
    },

    // ── 右足首: 左と逆位相 ──
    rightFootX: {
      0: 8.59, 0.267: -5.73, 0.5: -11.46, 0.633: -2.86,
      0.767: 0, 0.9: 14.32, 1.0: 8.59,
    },

    // ── 左上腕: 腕振り（X） ──
    leftShoulderX: { 0: -25.78, 0.267: 0, 0.5: 25.78, 0.767: 0, 1.0: -25.78 },

    // ── 右上腕: 左と逆位相 ──
    rightShoulderX: { 0: 25.78, 0.267: 0, 0.5: -25.78, 0.767: 0, 1.0: 25.78 },

    // ── 左前腕: 肘の屈曲（X） ──
    leftElbowX: { 0: -28.65, 0.267: -11.46, 0.5: -5.73, 0.767: -11.46, 1.0: -28.65 },

    // ── 右前腕: 左と逆位相 ──
    rightElbowX: { 0: -5.73, 0.267: -11.46, 0.5: -28.65, 0.767: -11.46, 1.0: -5.73 },
  },

  // isDelta=true のため rigifyAdjustments は不要（idle が基本姿勢を担当）
  rigifyAdjustments: {},
};
